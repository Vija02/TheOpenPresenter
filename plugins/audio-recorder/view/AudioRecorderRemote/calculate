  const [audioData, setAudioData] = useState(0);

  useEffect(() => {
    // Set up audio context and analyzer
    const audioContext = new AudioContext();
    const analyser = audioContext.createAnalyser();
    analyser.fftSize = 2048;
    const dataArray = new Uint8Array(analyser.frequencyBinCount);

    // Or with microphone
    navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
      const source = audioContext.createMediaStreamSource(stream);
      source.connect(analyser);

      function updateData() {
        analyser.getByteTimeDomainData(dataArray);
        let sum = 0;

        // Find average amplitude
        for (let i = 0; i < dataArray.length; i++) {
          sum += Math.abs(dataArray[i] - 128);
        }

        setAudioData(sum / dataArray.length / 128);

        requestAnimationFrame(updateData);
      }

      updateData();
    });
  }, []);